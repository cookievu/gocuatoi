function parseList(){const e=[],t=document.body.querySelectorAll("article > h1, article > h2");let n=null,i=null;for(let o=0;o<t.length;o++)"H1"===t[o].tagName?n=createNote(t[o].id,t[o].textContent):n.child.push(createNote(t[o].id,t[o].textContent)),"H1"===t[o].tagName&&e.push(n),i=t[o].tagName;return console.log(e),e}function createNote(e,t){return{href:"#"+e,title:t,child:[]}}function createListItem(e,t){const n=document.createElement("li"),i=document.createElement("a");i.href=e;const o=document.createTextNode(t);return i.append(o),n.append(i),n}function initProgress(){const e=document.querySelector("#reading-progress");if(e){let n=window.scrollY,i=window.innerHeight,o=$(document).height();function t(){const t=o-i;e.setAttribute("max",t),e.setAttribute("value",n)}window.addEventListener("scroll",function(){n=window.scrollY,t()},{passive:!0}),window.addEventListener("scroll",function(){i=window.innerHeight,o=$(document).height()}),t()}}$(document).ready(function(){const e=parseList(),t=$("#content-sidebar");e.map(e=>{if(t.append(`<li><a href="${e.href}">${e.title}</a></li>`),e.child&&e.child.length){const n=document.createElement("ul");e.child.map(e=>n.append(createListItem(e.href,e.title))),t.append(n)}}),initProgress()});
